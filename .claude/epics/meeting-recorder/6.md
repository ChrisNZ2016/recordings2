---
name: AI Summarization Feature
status: open
created: 2025-10-16T03:45:15Z
updated: 2025-10-16T07:39:30Z
github: https://github.com/ChrisNZ2016/recordings2/issues/6
depends_on: [4, 3]
parallel: false
conflicts_with: []
---

# Task 008: AI Summarization Feature

## Description

Integrate Vercel AI SDK, create /api/summaries endpoint, implement multi-select UI for generating AI summaries of meeting transcripts.

## Size

L (24-32 hours)

## Dependencies

- **Task 001**: Database Schema Setup (needs database tables)
- **Task 006**: Meeting Dashboard UI (needs UI for multi-select)

## Conflicts

None

## Parallel Execution

No - depends on database and dashboard being ready

## Acceptance Criteria

- [ ] Vercel AI SDK integrated (OpenAI GPT-4o Mini)
- [ ] /api/summaries endpoint created
- [ ] Multi-select capability in meeting list
- [ ] "Generate Summary" button and UI
- [ ] Summary includes: executive summary, key points, action items
- [ ] Summaries stored in database
- [ ] Summary display in UI
- [ ] Re-generation capability
- [ ] Streaming support for real-time updates
- [ ] Environment variable for OPENAI_API_KEY

## Technical Details

### Package Installation
```bash
npm install ai @ai-sdk/openai zod
```

### Database Schema Addition
Add to Task 001 schema or create migration:
```sql
CREATE TABLE summaries (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  meeting_id UUID REFERENCES meetings(id) ON DELETE CASCADE,
  content JSONB NOT NULL, -- {executive_summary, key_points[], action_items[]}
  model VARCHAR(100) NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_summaries_meeting ON summaries(meeting_id);
```

### API Endpoint
Create `/app/api/summaries/route.ts`:
- POST endpoint accepting meeting IDs array
- Fetch transcripts from database
- Call OpenAI GPT-4o Mini via Vercel AI SDK
- Stream response back to client
- Store summary in database
- Return summary data

### Prompt Engineering
System prompt for GPT-4o Mini:
```
You are a meeting summarization assistant. Analyze the following meeting transcript and provide:
1. Executive Summary (2-3 sentences)
2. Key Points (bullet list of main topics discussed)
3. Common challenges referenced
4. Common stratgies referenced
5. Action Items (specific tasks with owner if mentioned)

Be concise, accurate, and focus on actionable insights.
```

### Frontend Components
- **MultiSelectRow**: Checkbox UI for meeting list items
- **SummaryButton**: Trigger generation for selected meetings
- **SummaryModal/Panel**: Display generated summary
- **StreamingIndicator**: Show real-time generation progress

### UI Flow
1. User selects one or more meetings via checkboxes
2. Clicks "Generate Summary" button
3. Modal opens showing streaming summary generation
4. Summary displays with sections: Executive Summary, Key Points, Action Items
5. Summary saves automatically to database
6. User can regenerate or close

### Environment Variables
Add to `.env.local` and Vercel:
```
OPENAI_API_KEY=sk-...
```

### Error Handling
- Handle API rate limits
- Graceful fallback if OpenAI unavailable
- Display errors to user
- Retry logic for transient failures

## Testing Checklist

- [ ] Vercel AI SDK installed and configured
- [ ] OPENAI_API_KEY environment variable set
- [ ] Multi-select UI works in dashboard
- [ ] Single meeting summary generation
- [ ] Multiple meeting summary generation (combined)
- [ ] Streaming updates display in real-time
- [ ] Summary saves to database correctly
- [ ] Summary can be regenerated
- [ ] Error handling for API failures
- [ ] Rate limiting doesn't break UI
- [ ] Summary format includes all required sections
- [ ] Works with short and long transcripts
- [ ] Responsive design on mobile

## Notes

- **Model Choice**: GPT-4o Mini provides excellent quality at lower cost compared to GPT-4
- Consider token limits for very long transcripts (may need chunking or truncation)
- Store model version (e.g., "gpt-4o-mini") in database for auditing
- Consider caching summaries to avoid regeneration costs
- May want to add summary history/versioning
- Future: Allow custom prompts or summary styles
- Future: Support for multiple languages
- Accessibility: proper ARIA labels for streaming content
